# Overview

This repository contains the online office simulator that was used to study humans' willingness to help a robot for the following paper:

```
@inproceedings{nanavati2021modeling,
  title={Modeling Human Helpfulness with Individual and Contextual Factors for Robot Planning.},
  author={Nanavati, Amal and Mavrogiannis, Christoforos I and Weatherwax, Kevin and Takayama, Leila and Cakmak, Maya and Srinivasa, Siddhartha S},
  booktitle={Robotics: Science and Systems},
  year={2021}
}
```

This repository contains project-specific research code. It is likely not documented or cleaned up enough for others to use, and is primary released as a technical record of the backend and frontend system used in the above paper.

If this repository is helpful to you, please cite the above paper.

## Dependencies
```
pip3 install flask
pip3 install flask_cors
```

## Usage
```
cd flask
python3 run_example.py
```

Go to `http://127.0.0.1:8194/consent/35` to see what a participant with unique user ID 35 would see.

## Code Explained

The main game code is in `flask/templates/game.html`. It refers to numerous helper code files in `flask/static/game_src`. Those helper files are organized roughly thematically, but due to the nature of Phaser3 it is hard to make the code fully modular. So code in some of the helper files refers to variables/attributes in other files.

## Scripts

`mapDistanceAnalysis.py` was used to generate the sequence of human goals and robot actions. It uses `flask/assets/map_distances.json`, which is generated by http://127.0.0.1:8194/get_room_connection_graph.
